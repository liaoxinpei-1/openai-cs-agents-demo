# 游戏数据分析系统使用指南

## 🚀 快速启动

### 1. 启动后端服务
```bash
cd python-backend
python -m uvicorn api:app --reload --port 8000
```

### 2. 启动前端界面
```bash
cd ui
npm run dev:next
```

### 3. 访问系统
- **前端界面**: http://localhost:3000
- **后端API**: http://localhost:8000

## 💬 使用方式

### 对话交互
系统支持中文自然语言交互，你可以直接询问：

#### 玩家行为分析
- "分析玩家行为数据"
- "显示玩家分群结果"
- "分析玩家活跃度趋势"

#### 游戏性能监控
- "分析游戏性能指标"
- "显示服务器运行状态"
- "检查游戏崩溃率"

#### 收入分析
- "显示收入分析报告"
- "分析付费玩家行为"
- "预测收入趋势"

#### 留存分析
- "分析玩家留存率"
- "显示流失玩家特征"
- "生成留存率图表"

#### 数据可视化
- "生成玩家留存率图表"
- "创建收入趋势仪表板"
- "显示性能监控图表"

## 🤖 智能代理系统

系统包含以下专业代理：

### 1. 分流代理 (Triage Agent)
- **功能**: 理解用户需求，智能路由到专业代理
- **触发**: 系统默认入口

### 2. 玩家行为分析代理 (Player Behavior Agent)
- **功能**: 玩家分群、行为模式、活跃度分析
- **触发**: 询问玩家行为相关问题

### 3. 性能分析代理 (Performance Analysis Agent)
- **功能**: 游戏性能监控、崩溃分析、服务器状态
- **触发**: 询问性能、技术指标相关问题

### 4. 收入分析代理 (Revenue Analysis Agent)
- **功能**: 收入趋势、付费分析、变现优化
- **触发**: 询问收入、付费相关问题

### 5. 留存分析代理 (Retention Analysis Agent)
- **功能**: 留存率计算、流失预测、用户生命周期
- **触发**: 询问留存、流失相关问题

### 6. 可视化代理 (Visualization Agent)
- **功能**: 图表生成、仪表板创建、数据展示
- **触发**: 请求图表、可视化相关功能

## 📊 数据分析功能

### 玩家行为分析
- 玩家分群 (新手、活跃、付费、流失)
- 活跃度分析
- 行为模式识别
- 用户画像构建

### 性能监控
- 崩溃率监控
- 加载时间分析
- 服务器运行时间
- 错误日志分析

### 收入分析
- 收入趋势分析
- 付费玩家分析
- ARPU/ARPPU计算
- 收入预测模型

### 留存分析
- 次日/7日/30日留存率
- 流失风险预测
- 留存影响因素分析
- 用户生命周期价值

### 数据可视化
- 交互式图表
- 实时仪表板
- 趋势分析图
- 对比分析图

## 🔧 系统测试

运行自动化测试：
```bash
python test_system.py
```

测试内容包括：
- 后端服务健康检查
- 分析模块功能验证
- 代理路由测试
- 对话功能测试

## 📝 开发说明

### 技术架构
- **后端**: Python + FastAPI + OpenAI Agents SDK
- **前端**: Next.js + TypeScript + Tailwind CSS
- **数据**: Pandas + NumPy + Scikit-learn
- **可视化**: Plotly

### 核心模块
- `game_analytics.py` - 核心分析算法
- `main.py` - 代理定义和工具函数
- `api.py` - FastAPI应用和路由

### 扩展开发
系统采用模块化设计，可以轻松扩展：
1. 添加新的分析算法到 `game_analytics.py`
2. 创建新的工具函数到 `main.py`
3. 定义新的专业代理
4. 更新前端界面组件

## 🎯 最佳实践

1. **明确需求** - 清楚描述你想分析的数据和目标
2. **分步询问** - 复杂分析可以分步进行
3. **利用代理** - 让系统自动路由到最合适的专业代理
4. **查看可视化** - 请求图表和仪表板获得更直观的洞察

## 🆘 常见问题

**Q: 系统无法启动？**
A: 检查依赖是否安装完整，确保端口8000和3000未被占用

**Q: 代理没有正确路由？**
A: 尝试更明确地描述你的需求，使用相关的关键词

**Q: 数据分析结果不准确？**
A: 当前使用模拟数据，实际部署时需要连接真实的游戏数据源

**Q: 如何添加新的分析功能？**
A: 参考现有代码结构，在相应模块中添加新的分析算法和工具函数
